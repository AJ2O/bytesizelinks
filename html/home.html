<html>
    <head>
        <title>Byte-Size.Links - Shrink your URLs!</title>
        <link rel="stylesheet" href="/static/style.css">
        <meta name="description" content="Shrink URLs">
        <meta name="keywords" content="Short, Byte, Size, URL, Link, Hyperlink">

        <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon_io/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon_io/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon_io/favicon-16x16.png">
        <link rel="manifest" href="/static/images/favicon_io/site.webmanifest">
    </head>
    <script>
        function setButtonText() {
            var buttonElement = document.getElementById("button");
            var linkText = document.getElementById("customLink").value;
            if (!linkText || 0 === linkText.length) {
                buttonElement.value = "Generate Byte-Link!";
            }
            else {
                buttonElement.value = "Use Custom Link!";
            }
        }

        function copyGeneratedLink() {
            var linkElement = document.getElementById("generatedLink");
            
            // create temporary element for copying
            const el = document.createElement('textarea');
            el.value = linkElement.innerHTML;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            var copyTooltip = document.getElementById("copyTooltip");
            copyTooltip.innerHTML = "Copied the link!";
        }

        function displayCopyTooltip() {
            var copyTooltip = document.getElementById("copyTooltip");
            copyTooltip.innerHTML = "Copy to clipboard";
        }
    </script>
    <body class="webpage">
        <h1 class="title">Byte-Size.Links</h1>
        {{if .ErrorMessage}}
            <h2 class="center error">{{.Message}}</h2>
        {{end}}
        {{if .GeneratedMessage}}
            <div class="center">
                <table class="form table">
                    <tr>
                        <td><h2>Generated Byte-Link: <a id="generatedLink" class="link" href="{{.Message}}" target="_blank">{{.Message}}</a></h2></td>
                        <td><h2><a class="linkImage" href="{{.Message}}" target="_blank"><img src="/static/images/logo/red.png" width="48"></a></h2></td>
                    </tr>
                </table>
                <div class="tooltip">
                    <button class="button" onclick="copyGeneratedLink()" onmouseout="displayCopyTooltip()">
                        <span class="tooltiptext" id="copyTooltip">Copy to clipboard</span>
                        Copy Byte-Link
                    </button>
                </div>
            </div>
        {{end}}
        <p class="bodyText">
            Welcome to Byte-Size.Links!<br><br>

            Enter any URL and shrink it down to a few characters.<br>
            You can generate a short and random byte-link, or you can set a personally customized one.<br>
            Once created, you can use and share your byte-links any way you please!
        </p>
        <form action="/" method="POST">
            <table class="form" cellpadding="4">
                <tr>
                    <td class="formHeader"><label>Original Link: </label></td>
                    <td><input type="text" name="sourceLink" placeholder="{{.WebsiteURL}}"><br/></td>
                </tr>
                <tr>
                    <td class="formHeader"><label>Custom Byte-Link: </label></td>
                    <td><input oninput="setButtonText()" type="text" id="customLink" name="customLink" placeholder="bytesize"><br/></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="formHeader"></td>
                </tr>
            </table>
            <div class="center">
                <input class="button buttonGenerate" type="submit" id="button" name="submit" value="Generate Byte-Link!">
            </div>
        </form>
        <p class="bodyText">
            Here are some example byte-links:<br>
            <table class="table">
                <tr>
                    <td><a class="linkImage" href="{{.WebsiteURL}}/cookies" target="_blank"><img src="/static/images/logo/orange.png" width="32"></a></td>
                    <td><a class="link" href="{{.WebsiteURL}}/cookies" target="_blank">{{.WebsiteURL}}/cookies</a></td>
                    <td> - The Ultimate Chocolate Chip Cookie Recipe</td>
                </tr>
                <tr>
                    <td><a class="linkImage" href="{{.WebsiteURL}}/suntzu" target="_blank"><img src="/static/images/logo/green.png" width="32"></a></td>
                    <td><a class="link" href="{{.WebsiteURL}}/suntzu" target="_blank">{{.WebsiteURL}}/suntzu</a></td>
                    <td> - The Art of War by Sun Tzu</td>
                </tr>
                <tr>
                    <td><a class="linkImage" href="{{.WebsiteURL}}/birds" target="_blank"><img src="/static/images/logo/pink.png" width="32"></a></td>
                    <td><a class="link" href="{{.WebsiteURL}}/birds" target="_blank">{{.WebsiteURL}}/birds</a></td>
                    <td> - Birds of Paradise (National Geographic)</td>
                </tr>
            </table>
        </p>
    </body>
</html>