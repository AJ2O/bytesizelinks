<html>
    <head>
        <title>Byte-Size.Links - Shrink your URLs!</title>
        <link rel="stylesheet" href="/static/style.css">
        <meta name="description" content="Shrink URLs">
        <meta name="keywords" content="Short, Byte, Size, URL, Link, Hyperlink">

        <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon_io/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon_io/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon_io/favicon-16x16.png">
        <link rel="manifest" href="/static/images/favicon_io/site.webmanifest">
    </head>
    <script>
        function setButtonText() {
            var buttonElement = document.getElementById("button");
            var linkText = document.getElementById("customLink").value;
            if (!linkText || 0 === linkText.length) {
                buttonElement.value = "Generate!";
            }
            else {
                buttonElement.value = "Use Custom Link!";
            }
        }

        function copyGeneratedLink() {
            var linkElement = document.getElementById("generatedLink");
            
            // create temporary element for copying
            const el = document.createElement('textarea');
            el.value = linkElement.innerHTML;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            var copyTooltip = document.getElementById("copyTooltip");
            copyTooltip.innerHTML = "Copied the link!";
        }

        function displayCopyTooltip() {
            var copyTooltip = document.getElementById("copyTooltip");
            copyTooltip.innerHTML = "Copy to clipboard";
        }
    </script>
    <body class="webpage">
        <h1 class="title">Byte-Size.Links</h1>
        {{if .ErrorMessage}}
            <h2 class="center error">{{.Message}}</h2>
        {{end}}
        {{if .GeneratedMessage}}
            <div class="center">
                <h2>Generated Byte-Link: <a id="generatedLink" class="link" href="{{.Message}}" target="_blank">{{.Message}}</a></h2>
                <div class="tooltip">
                    <button class="button" onclick="copyGeneratedLink()" onmouseout="displayCopyTooltip()">
                        <span class="tooltiptext" id="copyTooltip">Copy to clipboard</span>
                        Copy Byte-Link
                    </button>
                </div>
            </div>
        {{end}}
        <form action="/" method="POST">
            <table class="form" cellpadding="4">
                <tr>
                    <td class="formHeader"><label>Original Link: </label></td>
                    <td><input type="text" name="sourceLink" placeholder="{{.WebsiteURL}}"><br/></td>
                </tr>
                <tr>
                    <td class="formHeader"><label>Custom Byte-Link: </label></td>
                    <td><input oninput="setButtonText()" type="text" id="customLink" name="customLink" placeholder="bytesize"><br/></td>
                </tr>
                <tr>
                    <td></td>
                    <td class="formHeader"></td>
                </tr>
            </table>
            <div class="center">
                <input class="button" type="submit" id="button" name="submit" value="Generate!">
            </div>
        </form>
    </body>
</html>